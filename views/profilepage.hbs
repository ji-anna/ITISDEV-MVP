<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>User Profile</title>
    <link rel="stylesheet" href="/css styles/profile.css">
</head>

<body>

    <header>
        <nav class="navbar-container">
            <div class="logo-container">
                <img src="assets\logowhite.PNG">
            </div>
            <ul class="nav-links">
                <li><a href="/mainMenu">Home</a></li>
                <li><a href="/space-availability">View Slots</a></li>
                <li><a href="/ticketDashboard">Ticket Dashboard</a></li>
                <li><a href="/profilepage" class="active">Profile</a></li>
                <li><a href="/" id="logoutButton">Logout</a></li>
            </ul>
        </nav>
    </header>

    <div class="profile-card">
        <h1>User Profile</h1>
        <div class="profile-image">
            <img id="profileImage" alt="User Photo">
        </div>
        <div class="profile-details">
            <div>
                <label>Name: </label>
                <span id="profileName">{{user.name}}</span>
            </div>
            <div>
                <label>User ID: </label>
                <span id="userId">{{user.name}}</span>
            </div>
            <div>
                <label>Email: </label>
                <span id="profileEmail">{{user.email}}</span>
            </div>
            <div>
                <label>Role: </label>
                <span id="profileRole">{{user.role}}</span>
            </div>
            <div>
                <label>Department: </label>
                <span id="profileDepartment">{{user.department}}</span>
            </div>
            <div>
                <label>Description: </label>
                <span id="profileDescription">{{user.description}}</span>
            </div>
            <div>
            <label>Car Plate Number(s): </label>

            <span id="plateNumber">{{#if carPlate}}{{carPlate}}{{else}}(No plates){{/if}}</span>
            </div>
            <button class="small-button" onclick="showAddCarForm()">Add Car</button>

            <div id="addCarForm" style="display: none; margin-top: 10px;">
            <label for="newPlateNumber">New Plate Number:</label>
            <input type="text" id="newPlateNumber" placeholder="Enter plate number" />
            <button onclick="confirmAddCar()">Confirm</button>
            </div>

            <div class="reservations-section">
    <h1>My Reservations</h1>

    <!-- Regular Reservations -->
    <h2>Active Reservations</h2>
    <table id="userReservations">
        <thead>
            <tr>
                <th>Floor</th>
                <th>Date</th>
                <th>Time</th>
                <th>Slot ID</th>
                <th>Anonymous</th>
            </tr>
        </thead>
        <tbody>
            {{#each reservations}}
                {{#unless (eq this.status "overtime")}}
                <tr>
                    <td>{{this.space}}</td>
                    <td>{{this.date}}</td>
                    <td>{{this.time}}</td>
                    <td>{{this.slotId}}</td>
                    <td>{{#if this.anonymous}}Yes{{else}}No{{/if}}</td>
                </tr>
                {{/unless}}
            {{/each}}
        </tbody>
    </table>

    <!-- Overtime Reservations -->
    <h2>Overtime Reservations</h2>
    <table id="overtimeReservations">
        <thead>
            <tr>
                <th>Floor</th>
                <th>Date</th>
                <th>Time</th>
                <th>Slot ID</th>
                <th>Anonymous</th>
                <th>Price</th>
                <th>Status</th>
            </tr>
        </thead>
        <tbody>
            {{#each reservations}}
                {{#if (eq this.status "overtime")}}
                <tr>
                    <td>{{this.space}}</td>
                    <td>{{this.date}}</td>
                    <td>{{this.time}}</td>
                    <td>{{this.slotId}}</td>
                    <td>{{#if this.anonymous}}Yes{{else}}No{{/if}}</td>
                    <td>â‚±1,200</td>
                    <td>
                        <form action="/api/payOvertime" method="POST">
                        <input type="hidden" name="reservationId" value="{{this._id}}">
                        <button type="submit" class="pay-button">Pay Now</button>
                        </form>
                    </td>
                </tr>
                {{/if}}
            {{/each}}
        </tbody>
    </table>
</div>


        </div>

        <center>
            <div class="button-grp">
                <button id="editButton" onclick="window.location.href = 'mainMenu';" class="button">Back to Main
                    Menu</button>
            </div>
        </center>
    </div>
    <script src="/js files/profile.js"></script>
    <script src="/js files/main.js"></script>
</body>

</html>